job_kinds:
  collator:
    parameters:
      fixed:
        - name: Config
          value: |
             - name: CONFIG_CONTENT
               value: | 
                 {{.UserParams.ConfigContent | nindent 4 | replace "\n" `\n`}}
          value: |
            requests:
              cpu: 1
              memory: 4Gi
        - name: Resources
          value: |
            requests:
              cpu: 1
              memory: 4Gi
        - name: Executable
          value: |
            - /opt/aqfer/hetero-collate
            - driver
            - --config-file
            - /etc/opt/aqfer/config.yaml
            - --credentials-file
            - /etc/opt/aqfer/credentials.yaml
            - --stage
            - split
            - --stage
            - collate
            - --stage
            - sort
            - --stage
            - merge-plan
            - --stage
            - merge-do
            - --stage
            - transform
    sandbox_template: cids/{{.Cid}}/sandboxes/{{.SandboxName}}/job-kind/collator/template.yaml
    config_files:
      - name: ConfigContent
        path: cids/{{.Cid}}/sandboxes/{{.SandboxName}}/jobs/{{.JobName}}/files/config.yaml
